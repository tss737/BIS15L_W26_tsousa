library("tidyverse")
library("naniar")
library("janitor")
life_history <- read_csv("data/mammal_lifehistories_v3.csv") %>% clean_names()
View(life_history)
glimpse(life_history)
summary(life_history)
life_history %>%
summarize(across(everything(), ~sum(is.na(.))))
life_history %>%
summarize(across(everything(), ~sum(is.na(.==-999))))
life_history %>%
summarize(across(everything(), ~sum(.==-999)))
life_history_no_nas <-
read_csv("data/mammal_lifehistories_v3.csv", na="-999") %>%
clean_names()
life_history_no_nas %>%
summarize(across(everything(), ~sum(is.na(.))))
glimpse(life_history_no_nas)
summary(life_history_no_nas)
hist(life_history_no_nas$max_life)
life_history_no_nas %>%
filter(max_life==0) %>%
select(order, family, genus, species, max_life)
life_history_no_nas %>%
mutate(max_life=na_if(max_life, 0))
life_history_no_nas <- life_history_no_nas %>%
mutate(max_life=na_if(max_life, 0))
miss_var_summary(life_history_no_nas)
life_history_no_nas %>%
gg_miss_var()
life_history_no_nas %>%
ggplot(aes(x=log10(mass), y=log10(wean_mass))) %>%
geom_point()
life_history_no_nas %>%
ggplot(aes(x=log10(mass), y=log10(wean_mass))) %>%
geom_point()
life_history_no_nas %>%
ggplot(aes(x=log10(mass), y=log10(wean_mass))) +
geom_point()
life_history_no_nas %>%
ggplot(aes(x=log10(mass), y=log10(wean_mass))) +
geom_point()+
geom_miss_point()
life_history_no_nas %>%
group_by(order) %>%
miss_var_summary()
life_history_no_nas %>%
group_by(order) %>%
miss_var_summary(order=T)
life_history %>% #going back to the original data
replace_with_na(replace = list(newborn = "not measured",
weaning= -999,
wean_mass= -999,
afr= -999,
max_life= 0,
litter_size= -999,
gestation= -999,
mass= -999)) %>%
miss_var_summary()
life_history %>% #going back to the original data
replace_with_na(replace = list(newborn = "not measured",
weaning= -999,
wean_mass= -999,
afr= -999,
max_life= 0,
litter_size= -999,
gestation= -999,
mass= -999)) %>%
miss_var_summary()
life_history %>%
replace_with_na_all(condition = ~.x ==-999)
life_history %>%
replace_with_na_all(condition = ~.x ==-999) %>%
miss_var_summary()
common_na_strings
common_na_numbers
life_history %>%
replace_with_na_all(condition = ~.x %in% c(common_na_numbers, common_na_strings)) %>%
mutate(newborn=na_if(newborn, "not measured"))
cities <- read_csv("data/cites.csv") %>% clean_names()
View(cities)
cities %>%
miss_var_summary()
cities %>%
group_by(class) %>%
miss_var_summary()
cities %>%
group_by(class) %>%
filter(variable=="exporter_reported_quantity") %>%
miss_var_summary()
cities %>%
group_by(class) %>%
filter(variable=="exporter_reported_quantity") %>%
miss_var_summary()
cities %>%
filter(variable=="exporter_reported_quantity") %>%
group_by(class) %>%
miss_var_summary()
cities %>%
select(class, exporter_reported_quantity) %>%
group_by(class) %>%
miss_var_summary()
cities %>%
select(class, exporter_reported_quantity) %>%
group_by(class) %>%
miss_var_summary() %>%
arrange(desc(n_miss))
cities %>%
select(class, exporter_reported_quantity) %>%
group_by(class) %>%
miss_var_summary() %>%
arrange(desc(n_miss))
cities %>%
select(class, exporter_reported_quantity) %>%
group_by(class) %>%
miss_var_summary() %>%
arrange(desc(pct_miss()))
arrange(desc(pct_miss)
cities %>%
cities %>%
select(class, exporter_reported_quantity) %>%
group_by(class) %>%
miss_var_summary() %>%
arrange(desc(pct_miss))
cities %>%
select(class, exporter_reported_quantity) %>%
group_by(class) %>%
miss_var_summary() %>%
arrange(desc(n_miss))
library("tidyverse")
library("janitor")
library("lubridate") #this will help us manage dates
table_A <- read_csv("data/table_A.csv")
table_B <- read_csv("data/table_B.csv")
table_A
table_B
inner_join(table_A, table_B, by="customer_ID")
left_join(table_A, table_B, by="customer_ID")
right_join(table_A, table_B, by="customer_ID")
full_join(table_A, table_B, by="customer_ID")
anti_join(table_A, table_B, by="customer_ID")
today()
now()
dateformat1 <- "20200922"
dateformat2 <- "09-22-2020"
dateformat3 <- "22/09/2020"
dateformat4 <- "09-22-2020 17:00:00"
dateformat5 <- "20200922 170000"
ymd(dateformat1)
mdy(dateformat2)
dmy(dateformat3)
mdy_hms(dateformat4)
ymd_hms(dateformat5)
spider_records <- read_csv("data/sider_records.csv") %>% clean_names()
spider_records <- read_csv("data/sider_records.csv") %>% clean_names()
spider_records <- read_csv("data/sider_records.csv") %>% clean_names()
library("tidyverse")
library("janitor")
library("lubridate") #this will help us manage dates
table_A <- read_csv("data/table_A.csv")
table_B <- read_csv("data/table_B.csv")
table_A
table_B
#join_type(firstTable, secondTable, by=columnTojoinOn)
inner_join(table_A, table_B, by="customer_ID")
left_join(table_A, table_B, by="customer_ID")
right_join(table_A, table_B, by="customer_ID")
full_join(table_A, table_B, by="customer_ID")
anti_join(table_A, table_B, by="customer_ID") #use to troubleshoot problematic joins
today()
now()
dateformat1 <- "20200922"
dateformat2 <- "09-22-2020"
dateformat3 <- "22/09/2020"
dateformat4 <- "09-22-2020 17:00:00"
dateformat5 <- "20200922 170000"
ymd(dateformat1)
mdy(dateformat2)
dmy(dateformat3)
mdy_hms(dateformat4)
ymd_hms(dateformat5)
spider_records <- read_csv("data/sider_records.csv") %>% clean_names()
spider_records <- read_csv("data/spider_records.csv") %>% clean_names()
spider_rec <- read_csv("data/spider_records.csv") %>% clean_names()
library("tidyverse")
library("janitor")
library("lubridate") #this will help us manage dates
table_A <- read_csv("data/table_A.csv")
table_B <- read_csv("data/table_B.csv")
table_A
table_B
#join_type(firstTable, secondTable, by=columnTojoinOn)
inner_join(table_A, table_B, by="customer_ID")
left_join(table_A, table_B, by="customer_ID")
right_join(table_A, table_B, by="customer_ID")
full_join(table_A, table_B, by="customer_ID")
anti_join(table_A, table_B, by="customer_ID") #use to troubleshoot problematic joins
today()
now()
dateformat1 <- "20200922"
dateformat2 <- "09-22-2020"
dateformat3 <- "22/09/2020"
dateformat4 <- "09-22-2020 17:00:00"
dateformat5 <- "20200922 170000"
ymd(dateformat1)
mdy(dateformat2)
dmy(dateformat3)
mdy_hms(dateformat4)
ymd_hms(dateformat5)
spider_rec <- read_csv("data/spider_records.csv") %>% clean_names()
spider_loc <- read_csv("data/spider_locations.csv") %>% clean_names()
spider_loc <- read_csv("data/spiders_locations.csv") %>% clean_names()
View(spider_rec)
View(spider_loc)
full_join(spider_rec, spider_locm by="accession")
full_join(spider_rec, spider_locm, by="accession")
full_join(spider_rec, spider_locm, by="accession")
full_join(spider_rec, spider_loc, by="accession")
joined <- full_join(spider_rec, spider_loc, by="accession")
joined
joined <- joined %>%
mutate(date=dmy(date))
View(joined)
joined %>%
mutate(date=dmy(date))
library("tidyverse")
library("janitor")
library("lubridate") #this will help us manage dates
table_A <- read_csv("data/table_A.csv")
table_B <- read_csv("data/table_B.csv")
table_A
table_B
#join_type(firstTable, secondTable, by=columnTojoinOn)
inner_join(table_A, table_B, by="customer_ID")
left_join(table_A, table_B, by="customer_ID")
right_join(table_A, table_B, by="customer_ID")
full_join(table_A, table_B, by="customer_ID")
anti_join(table_A, table_B, by="customer_ID") #use to troubleshoot problematic joins
today()
now()
dateformat1 <- "20200922"
dateformat2 <- "09-22-2020"
dateformat3 <- "22/09/2020"
dateformat4 <- "09-22-2020 17:00:00"
dateformat5 <- "20200922 170000"
ymd(dateformat1)
mdy(dateformat2)
dmy(dateformat3)
mdy_hms(dateformat4)
ymd_hms(dateformat5)
spider_rec <- read_csv("data/spider_records.csv") %>% clean_names()
spider_loc <- read_csv("data/spiders_locations.csv") %>% clean_names()
joined <- full_join(spider_rec, spider_loc, by="accession")
joined
joined %>%
mutate(date=dmy(date))
write_csv(joined, "joined_spider.csv")
names(joined)
library("tidyverse")
library("janitor")
library("lubridate") #this will help us manage dates
table_A <- read_csv("data/table_A.csv")
table_B <- read_csv("data/table_B.csv")
table_A
table_B
#join_type(firstTable, secondTable, by=columnTojoinOn)
inner_join(table_A, table_B, by="customer_ID")
left_join(table_A, table_B, by="customer_ID")
right_join(table_A, table_B, by="customer_ID")
full_join(table_A, table_B, by="customer_ID")
anti_join(table_A, table_B, by="customer_ID") #use to troubleshoot problematic joins
today()
now()
dateformat1 <- "20200922"
dateformat2 <- "09-22-2020"
dateformat3 <- "22/09/2020"
dateformat4 <- "09-22-2020 17:00:00"
dateformat5 <- "20200922 170000"
ymd(dateformat1)
mdy(dateformat2)
dmy(dateformat3)
mdy_hms(dateformat4)
ymd_hms(dateformat5)
spider_rec <- read_csv("data/spider_records.csv") %>% clean_names()
spider_loc <- read_csv("data/spiders_locations.csv") %>% clean_names()
joined <- left_join(spider_rec, spider_loc, by="accession")
names(joined)
joined <- joined %>%
mutate(date=dmy(date))
write_csv(joined, "joined_spider.csv")
View(spider_loc)
library("tidyverse")
library("janitor")
library("lubridate") #this will help us manage dates
table_A <- read_csv("data/table_A.csv")
table_B <- read_csv("data/table_B.csv")
table_A
table_B
#join_type(firstTable, secondTable, by=columnTojoinOn)
inner_join(table_A, table_B, by="customer_ID")
left_join(table_A, table_B, by="customer_ID")
right_join(table_A, table_B, by="customer_ID")
full_join(table_A, table_B, by="customer_ID")
anti_join(table_A, table_B, by="customer_ID") #use to troubleshoot problematic joins
today()
now()
dateformat1 <- "20200922"
dateformat2 <- "09-22-2020"
dateformat3 <- "22/09/2020"
dateformat4 <- "09-22-2020 17:00:00"
dateformat5 <- "20200922 170000"
ymd(dateformat1)
mdy(dateformat2)
dmy(dateformat3)
mdy_hms(dateformat4)
ymd_hms(dateformat5)
spider_rec <- read_csv("data/spider_records.csv") %>% clean_names()
spider_loc <- read_csv("data/spiders_locations.csv") %>% clean_names()
joined <- full_join(spider_rec, spider_loc, by="accession")
names(joined)
joined <- joined %>%
mutate(date=dmy(date))
write_csv(joined, "joined_spider.csv")
